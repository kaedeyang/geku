<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>紫微斗數命盤</title>
    <style>
        body {
            background-color: #0f0f0f;
            color: #00ffcc;
            font-family: 'Courier New', Courier, monospace;
            text-align: center;
        }
        .container {
            margin-top: 50px;
        }
        input, button {
            background-color: #222;
            color: #00ffcc;
            border: 1px solid #00ffcc;
            padding: 10px;
            margin: 5px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 5px;
            max-width: 600px;
            margin: auto;
            border: 2px solid #00ffcc;
            padding: 10px;
        }
        .cell {
            border: 1px solid #00ffcc;
            padding: 10px;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>紫微斗數命盤</h1>
        <input type="date" id="birthdate">
        <button onclick="generateZiWeiChart()">生成命盤</button>
        <div class="grid" id="result"></div>
    </div>
    <script>
        function generateZiWeiChart() {
            let birthdate = document.getElementById("birthdate").value;
            if (!birthdate) {
                alert("請輸入生日");
                return;
            }
            
            let chart = calculateZiWei(birthdate);
            document.getElementById("result").innerHTML = chart;
        }
        
        function calculateZiWei(birthdate) {
            let date = new Date(birthdate);
            let year = date.getFullYear();
            let month = date.getMonth() + 1;
            let day = date.getDate();
            
            let palace = ["命宮", "兄弟宮", "夫妻宮", "子女宮", "財帛宮", "疾厄宮", "遷移宮", "僕役宮", "官祿宮", "田宅宮", "福德宮", "父母宮"];
            let stars = ["紫微", "天機", "太陽", "武曲", "天同", "廉貞", "天府", "太陰", "貪狼", "巨門", "天相", "天梁"];
            
            let result = "";
            for (let i = 0; i < 12; i++) {
                let starIndex = (year + month + day + i) % stars.length;
                result += `<div class='cell'><strong>${palace[i]}</strong><br>${stars[starIndex]}</div>`;
            }
            return result;
        }
    </script>
</body>
</html>
