<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Œæ•´ç´«å¾®æ–—æ•¸å‘½ç›¤</title>
    <style>
        body {
            background-color: #121212;
            color: #FFD700;
            font-family: 'Courier New', Courier, monospace;
            text-align: center;
        }
        .container {
            margin-top: 20px;
        }
        input, button {
            background-color: #333;
            color: #FFD700;
            border: 1px solid #FFD700;
            padding: 10px;
            margin: 5px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 5px;
            max-width: 600px;
            margin: auto;
            border: 2px solid #FFD700;
            padding: 10px;
        }
        .cell {
            border: 1px solid #FFD700;
            padding: 10px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 14px;
        }
        .title {
            font-size: 18px;
            font-weight: bold;
            color: #FF4500;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ç´«å¾®æ–—æ•¸å‘½ç›¤</h1>
        <label>å‡ºç”Ÿå¹´æœˆæ—¥ï¼š</label>
        <input type="date" id="birthdate">
        <label>å‡ºç”Ÿæ™‚è¾°ï¼ˆ0~23é»ï¼‰ï¼š</label>
        <input type="number" id="birthhour" min="0" max="23">
        <button onclick="generateZiWeiChart()">ç”Ÿæˆå‘½ç›¤</button>
        <div class="grid" id="result"></div>
    </div>
    <script>
        function generateZiWeiChart() {
            let birthdate = document.getElementById("birthdate").value;
            let birthhour = parseInt(document.getElementById("birthhour").value);
            
            if (!birthdate || isNaN(birthhour) || birthhour < 0 || birthhour > 23) {
                alert("è«‹è¼¸å…¥å®Œæ•´çš„å‡ºç”Ÿè³‡è¨Šï¼");
                return;
            }
            
            let chart = calculateZiWei(birthdate, birthhour);
            document.getElementById("result").innerHTML = chart;
        }

        function calculateZiWei(birthdate, birthhour) {
            let date = new Date(birthdate);
            let month = date.getMonth() + 1;
            let year = date.getFullYear();
            
            let palace = ["å‘½å®®", "å…„å¼Ÿå®®", "å¤«å¦»å®®", "å­å¥³å®®", "è²¡å¸›å®®", "ç–¾å„å®®", "é·ç§»å®®", "åƒ•å½¹å®®", "å®˜ç¥¿å®®", "ç”°å®…å®®", "ç¦å¾·å®®", "çˆ¶æ¯å®®"];
            let stars = ["ç´«å¾®", "å¤©æ©Ÿ", "å¤ªé™½", "æ­¦æ›²", "å¤©åŒ", "å»‰è²", "å¤©åºœ", "å¤ªé™°", "è²ªç‹¼", "å·¨é–€", "å¤©ç›¸", "å¤©æ¢", "ä¸ƒæ®º", "ç ´è»"];
            
            let mingIndex = (month + birthhour) % 12;
            let siHua = ["ç¥¿", "æ¬Š", "ç§‘", "å¿Œ"];
            let huaMapping = {};
            for (let i = 0; i < 4; i++) {
                let index = (mingIndex + i) % 12;
                huaMapping[palace[index]] = siHua[i];
            }

            let daXian = [];
            for (let i = 0; i < 12; i++) {
                daXian.push((i * 10) + " ~ " + ((i + 1) * 10 - 1) + "æ­²");
            }

            let liuNian = (year - 2024 + 1) % 12;

            let result = "";
            for (let i = 0; i < 12; i++) {
                let starIndex = (mingIndex + i) % stars.length;
                let huaText = huaMapping[palace[i]] ? `<br><strong>${huaMapping[palace[i]]}</strong>` : "";
                let daXianText = `<br>ã€${daXian[i]}ã€‘`;
                let liuNianText = (i === liuNian) ? "<br>ğŸ”¥ã€æµå¹´ã€‘ğŸ”¥" : "";
                
                result += `<div class='cell'>
                    <div class='title'>${palace[i]}</div>
                    ${stars[starIndex]}${huaText}
                    ${daXianText}
                    ${liuNianText}
                </div>`;
            }
            return result;
        }
    </script>
</body>
</html>
